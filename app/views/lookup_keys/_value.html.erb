<% if is_template %>
    <table>
<% end %>
<tr class="fields matchers form-group <%= 'has-error' if f.object.errors.any? %>">
  <td>
    <%= f.hidden_field :match, :class => 'match' %>
    <%= select_tag '', nil, :class => 'matcher_key without_select2' %>
    =
    <%= text_field_tag '', nil, :class => 'matcher_value' %>
  </td>
  <td>
    <div class="form-group">
      <div class="col-md-4">
        <div class="editor-container">
          <%= render :partial => 'editor/toolbar', :locals => {:show_preview => false} %>
          <%= f.text_area(:rows => :auto, :value => f.object.value_before_type_cast, :size => "col-md-8",
                         # :class => 'editor_source',
                         :disabled => f.object.use_puppet_default) %>
          <div class="help-inline">
            <%= remove_child_link(icon_text("remove"), f, {:title => _('remove value')}) %>
          </div>
        </div>
        <a class="btn btn-default btn-sm btn-fullscreen" href="#" onclick="set_fullscreen_editor('.editor-container', $(this).parent()); $(this).parent().find('.editor-container').removeClass('hidden');">
          <i class="glyphicon glyphicon-resize-full"></i>
        </a>
      </div>
    </div>
  </td>
  <td class="ca">
    <%= f.check_box :use_puppet_default, :'data-property' => 'use_puppet_default',
                    :disabled => !is_param,
                    :onchange => 'toggleUsePuppetDefaultValue(this, "value")' if is_param %>
  </td>
  <td>
    <span class="help-block">
      <%= link_to_remove_fields('', f) %>
    </span>
  </td>
</tr>
<% if f.object.errors.any? %>
    <tr class="has-error">
      <td colspan="5">
      <span class="help-block">
        <%= f.object.errors.full_messages.to_sentence %>
      </span>
      </td>
    </tr>
<% end %>
<% if is_template %>
    </table>
<% end %>
